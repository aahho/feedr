!function(t){$(document).ready(function(){function e(t,e,o,a,n,i,s){i=i||!0,$.ajax({type:t,url:e,data:JSON.stringify(o),headers:s,dataType:"json",success:function(t,e,o){a(t,o,e)},failure:function(t,e,o){n(t,o,e)},async:i})}function o(t){var e=localStorage.getItem("sidebar-name"),o=$(".sidebarSubGroup").map(function(){return $(this).attr("id")});if("null"==e)for(var a=0;a<o.length;a++)document.getElementById(o[a]).style.display="none";else for(var a=0;a<o.length;a++)t==o[a]?document.getElementById(o[a]).style.display="block":document.getElementById(o[a]).style.display="none"}t.UI_ENDPOINT="","127.0.0.1:8000"===t.location.host?t.UI_ENDPOINT="http://platform.dev/":"id.sourc.in"===t.location.host?t.UI_ENDPOINT="http://platform.sourc.in/":t.UI_ENDPOINT="http://platform.sourceeasy.com/",$("[data-link]").click(function(e){t.location.href="http://"+t.location.host+$(this).attr("data-link")}),$("#goBack").click(function(e){t.location.href="http://"+t.location.host}),$("[data-details]").click(function(e){var o=$(this).attr("data-details").split("_"),a=o[0],n=o[1];roleId=null,3==o.length&&(roleId=o[2]);var i=$("#tokVar").val(),s=$(this).attr("title");"customer"===s?t.location.assign(t.UI_ENDPOINT+"?access_token="+i+"&org_id="+a+"&class_id="+n+"&customer_id="+roleId):"vendor"===s?t.location.assign(t.UI_ENDPOINT+"?access_token="+i+"&org_id="+a+"&class_id="+n+"&vendor_id="+roleId):t.location.assign(t.UI_ENDPOINT+"?access_token="+i+"&org_id="+a+"&class_id="+n)}),$.ajaxSetup({global:!0,headers:{"Content-Type":"application/json; charset=utf-8","access-token":t.localStorage.getItem("token")}});var a=t.location.pathname;if("/admin/dashboard"==a&&t.history.replaceState("object or string","Title","/admin/dashboard"),a.match(/(\/user\/activate\/)+/g)){var n=a.replace(/(\/user\/activate\/)+/g,"");t.localStorage.setItem("activation_code",n)}if(a.match(/(\/activate\/authcallback)+/g)){var i=($("#userEmail").val(),t.localStorage.getItem("activation_code")),s=$("form")[0];s.setAttribute("method","POST"),s.setAttribute("action","/user/activate/google/"+i),s.submit()}$(".app_subscription").click(function(t){var o=t.target.getAttribute("id").replace("app_",""),a=location.pathname.split("/").pop();e("POST","/admin/org/"+a+"/app/"+o+"/register",{},function(t,e){console.log(t),200==e.status&&location.reload(!0)},function(t,e){location.reload(!0),console.log(t)})}),$(".class_subscription").click(function(t){var o=t.target.getAttribute("app-id"),a=t.target.getAttribute("id").replace("classify_","");location.pathname.split("/").pop();e("POST","/admin/class/"+a+"/app/"+o+"/register",{},function(t,e){console.log(t),200==e.status&&location.reload(!0)},function(t,e){location.reload(!0),console.log(t)})}),$(".edit_permissions").click(function(t){var o=t.target.getAttribute("permission_name"),a=t.target.getAttribute("app_id"),n=t.target.getAttribute("org_id"),i=t.target.getAttribute("role_id"),s={toggle:o,class_id:a};console.log("data ==== = = = =",s,n,i),e("POST",""+i+"/permission",s,function(t,e){console.log(t),200==e.status&&location.reload(!0)},function(t,e){location.reload(!0),console.log(t)})}),$(".delete_user").click(function(t){var o=t.target.getAttribute("users_id"),a=t.target.getAttribute("roles_id"),n=t.target.getAttribute("orgs_id");console.log(t.target,o,a,n);var i={users:[]};i.users.push(o),e("POST","/admin/org/"+n+"/role/"+a+"/users/delete",i,function(t,e){console.log(t),200==e.status&&(console.log("asdfasdfasdfasdf"),location.reload(!0))},function(t,e){location.reload(!0),console.log(t)}),location.reload()}),$(".make_admin").click(function(t){var o=t.target.getAttribute("id").replace("admin_",""),a=location.pathname.split("/").pop();e("POST","/admin/org/"+a+"/user/"+o+"/setRole",{},function(t,e){console.log(t),200!==e.status&&console.log(e)},function(t,e){console.log(t),location.reload()})}),$(".ban_user").click(function(t){var o=t.target.getAttribute("id").replace("admin_",""),a=location.pathname.split("/").pop();e("POST","/admin/org/"+a+"/user/"+o+"/ban",{},function(t,e){console.log(t),200!==e.status&&console.log(e)},function(t,e){console.log(t),location.reload()})}),$(".user_classifier").change(function(t){var e=t.target.options[this.selectedIndex].text;"customer"===e?($("#user_entity_form").css("display","inline-block"),$("#customer_select").attr("name","entity").css("display","inline-block"),$("#vendor_select").attr("name","entity2").css("display","none")):"vendor"===e?($("#user_entity_form").css("display","inline-block"),$("#customer_select").attr("name","entity1").css("display","none"),$("#vendor_select").attr("name","entity").css("display","inline-block")):($("#user_entity_form").css("display","none"),$("#customer_select").attr("name","entity1").css("display","none"),$("#vendor_select").attr("name","entity2").css("display","none"))}),$("#user_entity_form").css("display","none"),$("#logo_remove").click(function(t){$("#delete_logo").val("true"),$("#org_logo").remove()});var l=$("#successIp").val();if(console.log(l),l){setTimeout(function(){location.assign("http://"+t.location.host)},3e3);var c=3;$("#timeLeft").html("Redirecting to login in "+c),setInterval(function(){c-=1,$("#timeLeft").html("Redirecting to login in "+c)},1e3)}var r=$("#errorIp").val();if(console.log(r),"400"===r){setTimeout(function(){location.assign("http://"+t.location.host)},3e3);var c=3;$("#timeLeft").html("Redirecting in "+c),setInterval(function(){c-=1,$("#timeLeft").html("Redirecting in "+c)},1e3)}$(".edit_milestone_template").click(function(t){console.log(t.target,$(this))});var d=localStorage.getItem("sidebar-name"),g=JSON.parse(d);o(g),$(".sideBarItems").click(function(t){var e=t.target.getAttribute("sidebar-name");e==JSON.parse(localStorage.getItem("sidebar-name"))?localStorage.setItem("sidebar-name","null"):localStorage.setItem("sidebar-name",JSON.stringify(e)),o(e)})})}(window);